<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QUANTA.AI | Professional Trading Terminal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lightweight-charts@4.1.1/dist/lightweight-charts.standalone.production.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Assistant:wght@300;400;600;700&display=swap');
        
        :root {
            --bg-main: #0a0e14;
            --bg-card: #111721;
            --border-color: rgba(255, 255, 255, 0.08);
            --text-muted: #94a3b8;
            --accent-blue: #3b82f6;
        }

        body {
            background-color: var(--bg-main);
            color: #ffffff;
            font-family: 'Inter', sans-serif;
            margin: 0;
            height: 100vh;
            overflow: hidden;
        }

        .hebrew { font-family: 'Assistant', sans-serif; direction: rtl; }
        
        .main-layout {
            display: grid;
            grid-template-columns: 1fr 340px;
            grid-template-rows: 70px 120px 1fr 50px;
            height: 100vh;
            gap: 1px;
            background: var(--border-color);
        }

        .panel {
            background: var(--bg-main);
            padding: 16px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .header-panel { grid-column: 1 / -1; display: flex; align-items: center; justify-content: space-between; border-bottom: 1px solid var(--border-color); }
        .portfolio-summary { grid-column: 1 / 2; display: flex; gap: 40px; align-items: center; background: #0f141d; }
        .watchlist-panel { grid-row: 2 / 4; grid-column: 2; border-left: 1px solid var(--border-color); }
        .chart-panel { grid-row: 3 / 4; grid-column: 1; position: relative; }
        .footer-panel { grid-column: 1 / -1; border-top: 1px solid var(--border-color); font-size: 11px; display: flex; align-items: center; padding: 0 20px; }

        .stat-label { font-size: 10px; text-transform: uppercase; color: var(--text-muted); font-weight: 700; letter-spacing: 0.05em; }
        .stat-value { font-size: 20px; font-weight: 600; font-variant-numeric: tabular-nums; }

        #main-chart { width: 100%; height: 100%; }
        
        .watchlist-item {
            display: grid;
            grid-template-columns: 1fr 80px 70px;
            padding: 10px 8px;
            border-bottom: 1px solid rgba(255,255,255,0.03);
            cursor: pointer;
            transition: background 0.2s;
        }
        .watchlist-item:hover { background: rgba(255,255,255,0.05); }
        .watchlist-active { background: rgba(59, 130, 246, 0.1); border-right: 3px solid var(--accent-blue); }

        .btn-trade { padding: 8px 16px; border-radius: 4px; font-weight: 700; font-size: 13px; transition: opacity 0.2s; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const App = () => {
            const [activeTicker, setActiveTicker] = useState('SPY');
            const chartContainerRef = useRef(null);
            const chartInstance = useRef(null);
            const seriesRef = useRef(null);

            const watchlist = [
                { symbol: 'SPY', price: '688.74', change: '-0.47%' },
                { symbol: 'QQQ', price: '617.21', change: '-0.75%' },
                { symbol: 'DIA', price: '442.12', change: '+0.12%' },
                { symbol: 'AAPL', price: '234.10', change: '+0.55%' },
                { symbol: 'NVDA', price: '142.20', change: '-1.20%' },
                { symbol: 'TSLA', price: '210.45', change: '+2.40%' },
                { symbol: 'MSFT', price: '415.60', change: '-0.30%' },
            ];

            const generateData = () => {
                const data = [];
                const markers = [];
                let p = 500 + Math.random() * 100;
                let date = new Date();
                date.setDate(date.getDate() - 500);
                for (let i = 0; i < 500; i++) {
                    const open = p;
                    const high = open + Math.random() * 8;
                    const low = open - Math.random() * 8;
                    const close = low + Math.random() * (high - low);
                    const timeStr = date.toISOString().split('T')[0];
                    data.push({ time: timeStr, open, high, low, close });
                    if (i > 470 && Math.random() > 0.96) {
                        const isBuy = Math.random() > 0.5;
                        markers.push({
                            time: timeStr,
                            position: isBuy ? 'belowBar' : 'aboveBar',
                            color: isBuy ? '#22c55e' : '#ef4444',
                            shape: isBuy ? 'arrowUp' : 'arrowDown',
                            text: isBuy ? 'BUY' : 'SELL',
                        });
                    }
                    p = close;
                    date.setDate(date.getDate() + 1);
                }
                return { data, markers };
            };

            useEffect(() => {
                if (!chartContainerRef.current) return;
                
                const chart = LightweightCharts.createChart(chartContainerRef.current, {
                    layout: { background: { color: '#0a0e14' }, textColor: '#94a3b8' },
                    grid: { vertLines: { color: '#161b22' }, horzLines: { color: '#161b22' } },
                    timeScale: { borderColor: '#30363d', rightOffset: 10, barSpacing: 8 },
                    rightPriceScale: { borderColor: '#30363d' },
                    crosshair: { mode: 0 }
                });

                const candleSeries = chart.addCandlestickSeries({
                    upColor: '#26a69a', downColor: '#ef5350', borderVisible: false, wickUpColor: '#26a69a', wickDownColor: '#ef5350',
                });

                const { data, markers } = generateData();
                candleSeries.setData(data);
                candleSeries.setMarkers(markers);
                chart.timeScale().fitContent();

                chartInstance.current = chart;
                seriesRef.current = candleSeries;

                const handleResize = () => chart.applyOptions({ 
                    width: chartContainerRef.current.clientWidth,
                    height: chartContainerRef.current.clientHeight 
                });
                window.addEventListener('resize', handleResize);
                return () => {
                    window.removeEventListener('resize', handleResize);
                    chart.remove();
                };
            }, []);

            useEffect(() => {
                if (seriesRef.current) {
                    const { data, markers } = generateData();
                    seriesRef.current.setData(data);
                    seriesRef.current.setMarkers(markers);
                }
            }, [activeTicker]);

            return (
                <div className="main-layout">
                    {/* Header */}
                    <header className="header-panel px-6 bg-[#0d1117]">
                        <div className="flex items-center gap-6">
                            <span className="text-xl font-black tracking-tighter text-white">QUANTA.AI</span>
                            <nav className="flex gap-4 text-xs font-semibold text-slate-500 hebrew">
                                <span className="text-white border-b-2 border-blue-500 pb-1 cursor-pointer">מסחר</span>
                                <span className="hover:text-white cursor-pointer">ניתוח טכני</span>
                                <span className="hover:text-white cursor-pointer">אסטרטגיה</span>
                                <span className="hover:text-white cursor-pointer">הגדרות</span>
                            </nav>
                        </div>
                        <div className="flex items-center gap-4">
                            <div className="bg-[#161b22] px-3 py-1.5 rounded border border-white/5 text-[11px] font-mono text-slate-400">
                                <span className="text-emerald-500 mr-2">●</span> MARKET OPEN
                            </div>
                            <div className="w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center text-[10px] font-bold">JD</div>
                        </div>
                    </header>

                    {/* Portfolio Info Bar */}
                    <section className="portfolio-summary px-8 border-b border-white/5">
                        <div className="flex flex-col">
                            <span className="stat-label hebrew">שווי תיק כולל</span>
                            <span className="stat-value text-2xl">$3,699.57</span>
                        </div>
                        <div className="flex flex-col">
                            <span className="stat-label hebrew">שינוי יומי</span>
                            <span className="stat-value text-rose-500">-$2,160.42 (-0.32%)</span>
                        </div>
                        <div className="flex flex-col">
                            <span className="stat-label hebrew">כוח קנייה</span>
                            <span className="stat-value">$11,094.00</span>
                        </div>
                        <div className="mr-auto flex gap-2 hebrew">
                            <button className="btn-trade bg-blue-600 text-white">הפקדה</button>
                            <button className="btn-trade bg-[#21262d] text-white border border-white/10">משיכה</button>
                        </div>
                    </section>

                    {/* Watchlist */}
                    <aside className="watchlist-panel panel">
                        <div className="flex justify-between items-center mb-4">
                            <h3 className="hebrew font-bold text-sm">רשימת מעקב</h3>
                            <button className="text-xs text-blue-500 font-bold">+</button>
                        </div>
                        <div className="overflow-y-auto pr-1">
                            <div className="grid grid-cols-3 text-[10px] text-slate-500 font-bold mb-2 px-2 uppercase tracking-widest">
                                <span>סימול</span>
                                <span className="text-right">מחיר</span>
                                <span className="text-right">שינוי</span>
                            </div>
                            {watchlist.map(item => (
                                <div 
                                    key={item.symbol}
                                    onClick={() => setActiveTicker(item.symbol)}
                                    className={`watchlist-item ${activeTicker === item.symbol ? 'watchlist-active' : ''}`}
                                >
                                    <span className="font-bold text-sm">{item.symbol}</span>
                                    <span className="text-right font-mono text-xs">${item.price}</span>
                                    <span className={`text-right font-mono text-xs ${item.change.startsWith('+') ? 'text-emerald-500' : 'text-rose-500'}`}>
                                        {item.change}
                                    </span>
                                </div>
                            ))}
                        </div>
                        
                        <div className="mt-auto pt-4 border-t border-white/5">
                            <div className="hebrew text-[10px] text-slate-500 font-bold mb-3 uppercase">פקודה מהירה</div>
                            <div className="space-y-2">
                                <div className="flex justify-between text-[11px] mb-1">
                                    <span className="text-slate-500">Shares</span>
                                    <span className="font-bold">10</span>
                                </div>
                                <div className="flex gap-2">
                                    <button className="flex-1 bg-emerald-600/20 text-emerald-500 border border-emerald-500/30 py-2 rounded text-xs font-bold">BUY {activeTicker}</button>
                                    <button className="flex-1 bg-rose-600/20 text-rose-500 border border-rose-500/30 py-2 rounded text-xs font-bold">SELL</button>
                                </div>
                            </div>
                        </div>
                    </aside>

                    {/* Chart Area */}
                    <main className="chart-panel panel p-0">
                        <div className="flex items-center justify-between p-4 bg-black/20 border-b border-white/5">
                            <div className="flex items-center gap-4">
                                <span className="text-2xl font-black">{activeTicker}</span>
                                <span className="text-xs text-slate-500 font-medium">SS SPDR S&P 500 ETF TRUST</span>
                            </div>
                            <div className="flex gap-1">
                                {['1D', '1W', '1M', '1Y', '5Y', 'ALL'].map(range => (
                                    <button key={range} className={`px-2 py-1 text-[10px] font-bold rounded ${range === '1D' ? 'bg-blue-600 text-white' : 'text-slate-500 hover:bg-white/5'}`}>
                                        {range}
                                    </button>
                                ))}
                            </div>
                        </div>
                        <div ref={chartContainerRef} id="main-chart"></div>
                    </main>

                    {/* Footer */}
                    <footer className="footer-panel bg-[#0d1117] text-slate-600 justify-between">
                        <div className="flex gap-4">
                            <span className="hebrew">סטטוס חיבור: <span className="text-emerald-500">תקין</span></span>
                            <span>CPU: 12%</span>
                            <span>LATENCY: 42ms</span>
                        </div>
                        <div className="hebrew font-bold">
                            QUANTA TERMINAL v6.0 • מערכת מסחר אלגוריתמית
                        </div>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
