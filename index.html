<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QUANTA PRO | AI Trading Terminal</title>
    <!-- External Resources -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;900&family=JetBrains+Mono:wght@400;700&family=Assistant:wght@400;700&display=swap');
        
        :root {
            direction: ltr !important;
            --bg-main: #020617;
            --panel-bg: rgba(15, 23, 42, 0.8);
            --accent: #3b82f6;
            --border-glow: rgba(59, 130, 246, 0.2);
        }

        html, body, #root {
            margin: 0; padding: 0;
            height: 100vh; width: 100vw;
            background-color: var(--bg-main);
            color: #f1f5f9;
            font-family: 'Inter', sans-serif;
            overflow: hidden;
            direction: ltr !important;
        }

        .mono { font-family: 'JetBrains Mono', monospace !important; }
        
        .app-grid {
            display: grid;
            grid-template-columns: 280px 1fr 340px;
            grid-template-rows: 56px 1fr 30px;
            height: 100vh;
            gap: 12px;
            padding: 12px;
            box-sizing: border-box;
        }

        .glass-card {
            background: var(--panel-bg);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.4);
        }

        .hebrew-ui {
            direction: rtl !important;
            text-align: right !important;
            font-family: 'Assistant', sans-serif;
            unicode-bidi: isolate;
        }

        .chart-container {
            position: relative;
            flex: 1;
            min-height: 0;
            width: 100%;
        }

        .pulse-dot {
            width: 8px; height: 8px;
            background: #10b981;
            border-radius: 50%;
            display: inline-block;
            box-shadow: 0 0 10px #10b981;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 0.4; }
            50% { opacity: 1; }
            100% { opacity: 0.4; }
        }

        .custom-scroll::-webkit-scrollbar { width: 4px; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #334155; border-radius: 10px; }
        
        .ticker-highlight {
            border-left: 3px solid transparent;
            transition: all 0.2s;
        }
        .ticker-highlight.active {
            background: rgba(59, 130, 246, 0.1);
            border-left-color: #3b82f6;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useCallback, useRef } = React;
        const API_KEY = "GNYJ6HBVJV6Z8TVS"; 

        const App = () => {
            const [ticker, setTicker] = useState('NVDA');
            const [data, setData] = useState({ price: '0.00', change: '0.00', percent: '0.00%', vol: '0', high: '0', low: '0' });
            const [history, setHistory] = useState({ labels: [], prices: [] });
            const [loading, setLoading] = useState(false);
            const chartRef = useRef(null);
            const chartInstance = useRef(null);

            const fetchData = useCallback(async (symbol) => {
                setLoading(true);
                try {
                    const qRes = await fetch(`https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=${symbol}&apikey=${API_KEY}`);
                    const qData = await qRes.json();
                    const quote = qData["Global Quote"];
                    if(quote) {
                        setData({
                            price: parseFloat(quote["05. price"]).toFixed(2),
                            change: parseFloat(quote["09. change"]).toFixed(2),
                            percent: quote["10. change percent"],
                            vol: quote["06. volume"],
                            high: quote["03. high"],
                            low: quote["04. low"]
                        });
                    }

                    const hRes = await fetch(`https://www.alphavantage.co/query?function=TIME_SERIES_MONTHLY&symbol=${symbol}&apikey=${API_KEY}`);
                    const hData = await hRes.json();
                    const series = hData["Monthly Time Series"];
                    if(series) {
                        const dates = Object.keys(series).sort().slice(-50);
                        setHistory({
                            labels: dates,
                            prices: dates.map(d => parseFloat(series[d]["4. close"]))
                        });
                    }
                } catch(e) { console.error(e); } finally { setLoading(false); }
            }, []);

            useEffect(() => { fetchData(ticker); }, [ticker, fetchData]);

            useEffect(() => {
                if (history.prices.length > 0 && chartRef.current) {
                    if (chartInstance.current) chartInstance.current.destroy();
                    const ctx = chartRef.current.getContext('2d');
                    const gradient = ctx.createLinearGradient(0, 0, 0, 400);
                    gradient.addColorStop(0, 'rgba(59, 130, 246, 0.3)');
                    gradient.addColorStop(1, 'rgba(59, 130, 246, 0)');

                    chartInstance.current = new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: history.labels,
                            datasets: [{
                                data: history.prices,
                                borderColor: '#3b82f6',
                                borderWidth: 3,
                                fill: true,
                                backgroundColor: gradient,
                                tension: 0.4,
                                pointRadius: 0,
                                pointHoverRadius: 5
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: { 
                                legend: { display: false },
                                tooltip: {
                                    mode: 'index',
                                    intersect: false,
                                    backgroundColor: '#0f172a',
                                    titleFont: { size: 10 },
                                    bodyFont: { size: 12, weight: 'bold' }
                                }
                            },
                            scales: {
                                x: { display: false },
                                y: { 
                                    position: 'right', 
                                    grid: { color: 'rgba(255,255,255,0.03)' },
                                    ticks: { color: '#64748b', font: { family: 'JetBrains Mono', size: 10 } }
                                }
                            }
                        }
                    });
                }
            }, [history]);

            return (
                <div className="app-grid">
                    {/* --- HEADER --- */}
                    <div className="col-span-3 glass-card flex items-center justify-between px-6">
                        <div className="flex items-center gap-10">
                            <div className="flex items-center gap-2">
                                <div className="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center font-black text-white italic">Q</div>
                                <span className="font-black text-xl tracking-tighter bg-gradient-to-r from-white to-slate-500 bg-clip-text text-transparent">QUANTA PRO</span>
                            </div>
                            <nav className="flex gap-6 text-[10px] font-bold text-slate-500 tracking-widest uppercase">
                                <span className="text-blue-500 border-b-2 border-blue-500 pb-1 cursor-pointer">Terminal</span>
                                <span className="hover:text-white cursor-pointer transition-colors">Analyzer</span>
                                <span className="hover:text-white cursor-pointer transition-colors">Portfolio</span>
                                <span className="hover:text-white cursor-pointer transition-colors">Algo-Trading</span>
                            </nav>
                        </div>
                        <div className="flex items-center gap-6">
                            <div className="flex items-center gap-3">
                                <div className="pulse-dot"></div>
                                <span className="hebrew-ui text-[11px] font-bold text-emerald-400">שרת פעיל: תל אביב</span>
                            </div>
                            <div className="h-4 w-[1px] bg-slate-800"></div>
                            <span className="mono text-[11px] text-slate-400">14:58:22 GMT+2</span>
                        </div>
                    </div>

                    {/* --- LEFT: WATCHLIST & SIGNALS --- */}
                    <aside className="flex flex-col gap-3">
                        <div className="glass-card p-3">
                            <input 
                                className="w-full bg-slate-900/50 border border-white/5 rounded-lg px-4 py-2 text-xs mono outline-none focus:border-blue-500/50 transition-all"
                                placeholder="Search Ticker..."
                                onKeyDown={e => e.key === 'Enter' && setTicker(e.target.value.toUpperCase())}
                            />
                        </div>
                        <div className="glass-card flex-1 flex flex-col p-2">
                            <div className="px-3 py-2 flex justify-between items-center border-b border-white/5 mb-2">
                                <span className="hebrew-ui text-[10px] font-bold text-slate-500">רשימת מעקב</span>
                                <span className="text-[10px] mono text-blue-500">8 Assets</span>
                            </div>
                            <div className="flex-1 overflow-y-auto custom-scroll pr-1">
                                {[
                                    {s: 'NVDA', p: '+2.4%'}, {s: 'AAPL', p: '-0.8%'}, 
                                    {s: 'TSLA', p: '+1.1%'}, {s: 'BTC', p: '+4.2%'},
                                    {s: 'MSFT', p: '+0.5%'}, {s: 'GOOGL', p: '-1.2%'},
                                    {s: 'AMD', p: '+3.1%'}, {s: 'SPY', p: '+0.2%'}
                                ].map(item => (
                                    <div 
                                        key={item.s} 
                                        onClick={() => setTicker(item.s)}
                                        className={`ticker-highlight flex justify-between items-center p-3 rounded-lg mb-1 cursor-pointer ${ticker === item.s ? 'active' : 'hover:bg-white/5'}`}
                                    >
                                        <div>
                                            <div className="font-bold mono text-sm">{item.s}</div>
                                            <div className="text-[9px] text-slate-500 uppercase">Nasdaq 100</div>
                                        </div>
                                        <div className={`text-xs mono font-bold ${item.p.startsWith('+') ? 'text-emerald-400' : 'text-red-400'}`}>
                                            {item.p}
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </aside>

                    {/* --- CENTER: MAIN CHART & ANALYTICS --- */}
                    <main className="flex flex-col gap-3">
                        {/* Price Banner */}
                        <div className="glass-card p-6 flex justify-between items-end bg-gradient-to-br from-slate-900 to-slate-950">
                            <div className="flex gap-10">
                                <div>
                                    <div className="text-[10px] text-slate-500 font-bold uppercase mb-2 tracking-widest">Global Asset</div>
                                    <h2 className="text-5xl font-black mono tracking-tighter">{ticker}</h2>
                                    <div className="hebrew-ui text-[11px] text-blue-400 mt-1">נכס מאושר למסחר אלגוריתמי</div>
                                </div>
                                <div className="h-16 w-[1px] bg-white/5"></div>
                                <div>
                                    <div className="hebrew-ui text-[10px] text-slate-500 font-bold mb-2 uppercase tracking-widest">מחיר שוק נוכחי</div>
                                    <div className="flex items-baseline gap-3">
                                        <span className="text-5xl font-bold mono tracking-tight text-white">${data.price}</span>
                                        <span className={`text-lg mono font-bold ${parseFloat(data.change) >= 0 ? 'text-emerald-400' : 'text-red-400'}`}>
                                            {parseFloat(data.change) >= 0 ? '▲' : '▼'} {data.percent}
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <div className="hidden lg:flex gap-6 pb-1">
                                <div className="text-right">
                                    <div className="hebrew-ui text-[9px] text-slate-500 font-bold mb-1">גבוה יומי</div>
                                    <div className="mono text-sm text-slate-300">${data.high}</div>
                                </div>
                                <div className="text-right">
                                    <div className="hebrew-ui text-[9px] text-slate-500 font-bold mb-1">נמוך יומי</div>
                                    <div className="mono text-sm text-slate-300">${data.low}</div>
                                </div>
                            </div>
                        </div>

                        {/* Chart Area */}
                        <div className="glass-card flex-1 p-6 flex flex-col min-h-0 relative">
                            <div className="flex justify-between items-center mb-6 z-10">
                                <div className="flex p-1 bg-black/40 rounded-lg border border-white/5">
                                    {['1D', '1W', '1M', '1Y', '5Y'].map(t => (
                                        <button key={t} className={`px-4 py-1 text-[10px] font-black rounded-md transition-all ${t === '1M' ? 'bg-blue-600 text-white shadow-lg' : 'text-slate-500 hover:text-white'}`}>{t}</button>
                                    ))}
                                </div>
                                <div className="flex items-center gap-4">
                                    <div className="hebrew-ui bg-emerald-500/10 text-emerald-500 px-3 py-1 rounded text-[10px] font-bold border border-emerald-500/20">
                                        סיגנל: קנייה חזקה
                                    </div>
                                    <div className="flex gap-2">
                                        <div className="w-2 h-2 rounded-full bg-blue-500"></div>
                                        <div className="w-2 h-2 rounded-full bg-slate-700"></div>
                                    </div>
                                </div>
                            </div>
                            <div className="chart-container">
                                {loading && <div className="absolute inset-0 z-20 bg-slate-950/40 backdrop-blur-sm flex items-center justify-center font-bold text-blue-500">SYNCING MARKET DATA...</div>}
                                <canvas ref={chartRef}></canvas>
                            </div>
                        </div>
                    </main>

                    {/* --- RIGHT: NEWS & EXECUTION --- */}
                    <aside className="flex flex-col gap-3">
                        {/* Trade Execution */}
                        <div className="glass-card p-6 bg-gradient-to-b from-slate-900/50 to-transparent">
                            <h3 className="hebrew-ui text-[11px] font-black text-slate-400 mb-5 tracking-widest uppercase">ביצוע פקודת מסחר</h3>
                            <div className="space-y-5">
                                <div className="grid grid-cols-2 gap-2 p-1 bg-black/40 rounded-xl border border-white/5">
                                    <button className="py-3 text-[10px] font-black uppercase bg-emerald-600 rounded-lg text-white shadow-xl shadow-emerald-950/20">Buy</button>
                                    <button className="py-3 text-[10px] font-black uppercase text-slate-500 hover:text-white">Sell</button>
                                </div>
                                <div>
                                    <div className="flex justify-between mb-2">
                                        <label className="hebrew-ui text-[10px] text-slate-500 font-bold uppercase">כמות מניות</label>
                                        <span className="mono text-[10px] text-blue-500 font-bold">Max: 1,420</span>
                                    </div>
                                    <input type="number" defaultValue="10" className="w-full bg-slate-950 border border-white/10 rounded-xl p-4 text-2xl mono font-black outline-none focus:border-blue-500 shadow-inner" />
                                </div>
                                <div className="p-4 bg-blue-500/5 rounded-xl border border-blue-500/10 space-y-3">
                                    <div className="flex justify-between text-[11px]">
                                        <span className="hebrew-ui text-slate-500 font-bold">שווי עסקה:</span>
                                        <span className="mono text-white font-bold">${(10 * parseFloat(data.price || 0)).toLocaleString()}</span>
                                    </div>
                                    <div className="flex justify-between text-[11px]">
                                        <span className="hebrew-ui text-slate-500 font-bold">ביטחונות נדרשים:</span>
                                        <span className="mono text-emerald-400 font-bold">$0.00 (Margin)</span>
                                    </div>
                                </div>
                                <button className="w-full bg-blue-600 hover:bg-blue-500 text-white font-black py-5 rounded-xl text-xs uppercase tracking-[0.3em] shadow-2xl shadow-blue-900/40 transition-all transform hover:-translate-y-1">
                                    Confirm Trade
                                </button>
                            </div>
                        </div>

                        {/* Market News Feed */}
                        <div className="glass-card flex-1 flex flex-col p-5">
                            <div className="flex items-center justify-between mb-4 border-b border-white/5 pb-2">
                                <h3 className="hebrew-ui text-[11px] font-black text-slate-400 tracking-widest uppercase">חדשות ואירועים</h3>
                                <div className="w-2 h-2 bg-red-500 rounded-full animate-ping"></div>
                            </div>
                            <div className="space-y-5 overflow-y-auto custom-scroll pr-1">
                                {[
                                    {t: "הודעת הריבית של הפד צפויה הערב בשעה 21:00", time: "לפני 5 דק'"},
                                    {t: `אנליסטים מעלים את מחיר היעד של ${ticker} ב-15%`, time: "לפני 22 דק'"},
                                    {t: "דוח התעסוקה בארה\"ב היכה את התחזיות המוקדמות", time: "לפני שעה"},
                                    {t: "מגזר השבבים מוביל את העליות בוול סטריט", time: "לפני שעתיים"}
                                ].map((news, i) => (
                                    <div key={i} className="group cursor-pointer">
                                        <p className="hebrew-ui text-[12px] text-slate-300 leading-snug font-bold group-hover:text-blue-400 transition-colors">
                                            {news.t}
                                        </p>
                                        <span className="hebrew-ui text-[9px] text-slate-600 mt-1 block">{news.time}</span>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </aside>

                    {/* --- FOOTER --- */}
                    <footer className="col-span-3 flex items-center justify-between px-4 text-[9px] font-bold text-slate-600 uppercase tracking-[0.3em] border-t border-white/5 bg-[#010204]">
                        <div className="flex gap-8">
                            <span className="text-blue-600 flex items-center gap-2">
                                <span className="w-1.5 h-1.5 bg-blue-600 rounded-full"></span> 
                                Data: AlphaVantage Realtime
                            </span>
                            <span>System: Stable</span>
                            <span>Latency: 18ms</span>
                        </div>
                        <div className="hebrew-ui text-slate-700 opacity-50 font-bold">
                            טרמינל מסחר מקצועי © Quanta AI Systems 2024
                        </div>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
